#!/bin/zsh

cd ${0:h}

while {true} {
    ./update

    [[ -n $(git diff) ]] && {
        git pull \
            && git commit -am "$(date -u +'%Y-%m-%d %H:%M:%S') UTC" \
            && git push
    }

    sleep 600
}
